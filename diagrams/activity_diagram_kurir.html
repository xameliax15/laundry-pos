<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activity Diagram - Kurir</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            max-width: 100%;
            overflow-x: auto;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }

        h2 {
            color: #34495e;
            text-align: center;
            font-size: 18px;
            font-weight: normal;
            margin-bottom: 30px;
        }

        .mermaid {
            text-align: center;
        }

        .info {
            background: #fff8e1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #ffa000;
        }

        .info h3 {
            margin-top: 0;
            color: #f57c00;
        }

        .info ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .info li {
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Activity Diagram - Kurir (Courier)</h1>
        <h2>Sistem POS Laundry Trias Laundry</h2>

        <div class="info">
            <h3>Ringkasan Use Cases Kurir</h3>
            <ul>
                <li><strong>UC-01</strong>: Login ke Sistem</li>
                <li><strong>UC-12</strong>: Lihat Order Pengiriman</li>
                <li><strong>UC-13</strong>: Mulai Pengiriman</li>
                <li><strong>UC-14</strong>: Update Status Pengiriman</li>
                <li><strong>UC-15</strong>: Terima Pembayaran COD</li>
                <li><strong>UC-16</strong>: Lihat Riwayat Pengiriman</li>
            </ul>
        </div>

        <div class="mermaid">
            flowchart TD
            Start([Start: Kurir]) --> Login[Login ke Sistem]
            Login --> ValidasiAuth{Validasi<br />Kredensial}

            ValidasiAuth -->|Invalid| ErrorLogin[Tampilkan Error Login]
            ErrorLogin --> Login

            ValidasiAuth -->|Valid| DashboardKurir[Dashboard Kurir]

            DashboardKurir --> MenuPilihan{Pilih Menu}

            MenuPilihan -->|Orders Tab| LihatOrderAktif[Ambil Order Aktif<br />Status: DIKIRIM]
            LihatOrderAktif --> CekAdaOrder{Ada Order<br />yang Ditugaskan?}

            CekAdaOrder -->|Tidak| TungguOrder[Tampilkan: Tidak Ada Order]
            TungguOrder --> DashboardKurir

            CekAdaOrder -->|Ya| TampilkanDaftarOrder[Tampilkan Daftar Order]
            TampilkanDaftarOrder --> PilihOrder[Pilih Order untuk Dikirim]

            PilihOrder --> LihatDetailOrder[Lihat Detail Order<br />- Nama Pelanggan<br />- Alamat Lengkap<br />- Total
            Tagihan<br />- Metode Pembayaran]

            LihatDetailOrder --> MulaiPengiriman[Klik: Mulai Pengiriman]
            MulaiPengiriman --> UpdateStatusOnDelivery[Update OrderKurir Status:<br />ON_DELIVERY]

            UpdateStatusOnDelivery --> NavigasiAlamat[Navigasi ke Alamat<br />via Google Maps]
            NavigasiAlamat --> SampaiTujuan[Sampai di Lokasi Pelanggan]

            SampaiTujuan --> CekMetodePembayaran{Metode<br />Pembayaran?}

            CekMetodePembayaran -->|COD| TerimaPembayaranCOD[Terima Pembayaran Tunai]
            TerimaPembayaranCOD --> InputJumlahCOD[Input Jumlah yang Diterima]
            InputJumlahCOD --> UploadBuktiFoto[Upload Bukti Foto Opsional]
            UploadBuktiFoto --> CatatPembayaranCOD[Catat Pembayaran COD<br />Status: Menunggu Verifikasi Owner]
            CatatPembayaranCOD --> SerahkanBarang

            CekMetodePembayaran -->|Sudah Lunas/Transfer/QRIS| SerahkanBarang[Serahkan Laundry<br />ke Pelanggan]

            SerahkanBarang --> KonfirmasiPenerimaan[Konfirmasi Penerimaan<br />dari Pelanggan]
            KonfirmasiPenerimaan --> KlikSelesaikanPengiriman[Klik: Selesaikan Pengiriman]

            KlikSelesaikanPengiriman --> UpdateOrderKurirDelivered[Update OrderKurir Status:<br />DELIVERED]
            UpdateOrderKurirDelivered --> TriggerFSMTerima[Trigger FSM Event: terima]
            TriggerFSMTerima --> UpdateTransaksiDiterima[Update Transaksi Status:<br />DITERIMA]

            UpdateTransaksiDiterima --> PengirimanSelesai[Pengiriman Selesai]
            PengirimanSelesai --> CekOrderLain{Ada Order<br />Lain?}

            CekOrderLain -->|Ya| LihatOrderAktif
            CekOrderLain -->|Tidak| DashboardKurir

            MenuPilihan -->|History Tab| LihatRiwayatPengiriman[Ambil Riwayat Order<br />Status: DITERIMA]
            LihatRiwayatPengiriman --> TampilkanRiwayat[Tampilkan Daftar<br />Order yang Sudah Selesai]

            TampilkanRiwayat --> PilihRiwayat{Pilih Order<br />untuk Detail?}
            PilihRiwayat -->|Ya| LihatDetailRiwayat[Lihat Detail Order<br />- Tanggal Pengiriman<br />- Alamat<br />-
            Total Tagihan<br />- Bukti Penerimaan]
            PilihRiwayat -->|Tidak| DashboardKurir

            LihatDetailRiwayat --> DashboardKurir

            MenuPilihan -->|Logout| LogoutKurir[Logout dari Sistem]
            LogoutKurir --> End([End: Session Berakhir])
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                curve: 'basis',
                padding: 20
            }
        });
    </script>
</body>

</html>